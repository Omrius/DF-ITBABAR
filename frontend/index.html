<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datafindser - Analyse de Crédit</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Écran de connexion -->
    <div id="login-screen" class="login-container">
        <div class="login-card">
            <h2>Accès à l'Application</h2>
            <div class="input-group">
                <label for="password-input">Mot de passe :</label>
                <input type="password" id="password-input" placeholder="Entrez le mot de passe">
            </div>
            <button id="login-button">Accéder</button>
            <p id="login-error-message" class="error-message"></p>
        </div>
    </div>

    <!-- Contenu principal de l'application (initialement masqué) -->
    <div id="app-content" class="container hidden">
        <h1>Analyse d'Appétence au Crédit</h1>
        <p class="subtitle">Scoring de clients pour différents types de crédit</p>

        <div class="upload-section">
            <h2>1. Téléchargez votre fichier client (Excel ou CSV)</h2>
            <input type="file" id="file-input" accept=".xlsx, .xls, .csv">
            <div class="form-group">
                <label for="credit-type-select">Type de Crédit :</label>
                <select id="credit-type-select">
                    <option value="conso">Consommation</option>
                    <option value="immo">Immobilier</option>
                </select>
            </div>
            <div class="form-group">
                <label for="threshold-input">Seuil d'appétence :</label>
                <input type="number" id="threshold-input" value="0.5" step="0.01" min="0.01" max="0.99">
            </div>
            <button id="predict-button" disabled>Analyser le Fichier</button>
            <p id="upload-status" class="status-message"></p>
        </div>

        <div class="results-section hidden">
            <h2>2. Résultats de l'Analyse</h2>
            <div id="file-analysis-summary" class="analysis-summary">
                <h3>Résumé du Fichier :</h3>
                <p><strong>Nom du fichier :</strong> <span id="summary-filename"></span></p>
                <p><strong>Taille :</strong> <span id="summary-filesize"></span></p>
                <p><strong>Nombre de clients :</strong> <span id="summary-numclients"></span></p>
                <p><strong>Clients appétents :</strong> <span id="summary-appetent-clients"></span></p>
                <p><strong>Seuil utilisé :</strong> <span id="summary-threshold"></span></p>
                <p><strong>Critères pris en charge :</strong> <span id="summary-supported-features"></span></p>
                <p><strong>Critères non pris en charge (ignorés) :</strong> <span id="summary-ignored-features"></span></p>
                <p><strong>Critères manquants (valeurs par défaut utilisées) :</strong> <span id="summary-missing-features"></span></p>
            </div>

            <div id="model-metrics-display" class="model-metrics">
                <h3>Performance du Modèle (Moteur IA) :</h3>
                <p><strong>Précision (Accuracy) :</strong> <span id="metric-accuracy"></span></p>
                <p><strong>Rappel (Recall) :</strong> <span id="metric-recall"></span></p>
                <p><strong>Score F1 :</strong> <span id="metric-f1"></span></p>
                <p><strong>AUC-ROC :</strong> <span id="metric-auc-roc"></span></p>
                <div class="image-container">
                    <p>Importance des caractéristiques :</p>
                    <img id="feature-importance-chart" src="" alt="Graphique d'importance des caractéristiques" style="max-width: 100%;">
                    <p id="chart-unavailable" class="error-message hidden">Graphique non disponible.</p>
                </div>
            </div>

            <h3>Vue Détaillée des Prédictions :</h3>
            <table id="predictions-table">
                <thead>
                    <tr>
                        <th>ID Client</th>
                        <th>Âge</th>
                        <th>Revenu</th>
                        <th>Enfants</th>
                        <th>Statut Pro</th>
                        <th>Ancienneté Client</th>
                        <th>Crédit Existant (Conso)</th>
                        <th>Score d'Appétence</th>
                        <th>Observations (Forces)</th>
                        <th>Observations (Faiblesses)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les résultats de prédiction seront insérés ici -->
                </tbody>
            </table>
            <button id="show-more-button">Afficher plus de clients</button>
            <p id="no-more-clients" class="hidden">Tous les clients sont affichés.</p>

            <div class="download-section">
                <h3>Télécharger les Rapports :</h3>
                <button id="download-pdf-button" disabled>Rapport PDF</button>
                <button id="download-csv-button" disabled>Résultats CSV</button>
                <button id="download-xlsx-button" disabled>Résultats XLSX</button>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>
